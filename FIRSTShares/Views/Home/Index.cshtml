@{
    ViewData["Title"] = "Início";
}

@model List<FIRSTShares.Entities.Categoria>

@if (ViewBag.Usuario != null)
{

    <div class="row">
        <div class="col-8">
            <button type="button" class="btn btn-secondary  mb-3 float-right mr-0" data-toggle="modal" data-target="#modalPost">
                <i class="fas fa-plus"></i>&nbsp&nbsp<strong>Novo tópico</strong>
            </button>
        </div>
    </div>

}
<div class="row">
    <div class="col-8">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"><span class="badge badge-info">Categoria</span> Special title treatment</h5>
                <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                <a href="#" class="btn btn-info float-right" data-toggle="tooltip" data-placement="top" title="Ler mais"><i class="fab fa-readme"></i></a>
                <a href="#" class="btn btn-primary float-right" data-toggle="tooltip" data-placement="top" title="Comentar"><i class="fas fa-comments"></i></a>
            </div>
            <div class="card-footer text-muted">
                <span class="float-left">Gabs</span>
                <span class="float-right">@DateTime.Now</span>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"><span class="badge badge-info">Categoria</span> Special title treatment</h5>
                <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                <a href="#" class="btn btn-info float-right" data-toggle="tooltip" data-placement="top" title="Ler mais"><i class="fab fa-readme"></i></a>
                <a href="#" class="btn btn-primary float-right" data-toggle="tooltip" data-placement="top" title="Comentar"><i class="fas fa-comments"></i></a>
            </div>
            <div class="card-footer text-muted">
                <span class="float-left">Gabs</span>
                <span class="float-right">@DateTime.Now</span>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"><span class="badge badge-info">Categoria</span> Special title treatment</h5>
                <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                <a href="#" class="btn btn-info float-right" data-toggle="tooltip" data-placement="top" title="Ler mais"><i class="fab fa-readme"></i></a>
                <a href="#" class="btn btn-primary float-right" data-toggle="tooltip" data-placement="top" title="Comentar"><i class="fas fa-comments"></i></a>
            </div>
            <div class="card-footer text-muted">
                <span class="float-left">Gabs</span>
                <span class="float-right">@DateTime.Now</span>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"><span class="badge badge-info">Categoria</span> Special title treatment</h5>
                <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                <a href="#" class="btn btn-info float-right" data-toggle="tooltip" data-placement="top" title="Ler mais"><i class="fab fa-readme"></i></a>
                <a href="#" class="btn btn-primary float-right" data-toggle="tooltip" data-placement="top" title="Comentar"><i class="fas fa-comments"></i></a>
            </div>
            <div class="card-footer text-muted">
                <span class="float-left">Gabs</span>
                <span class="float-right">@DateTime.Now</span>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title"><span class="badge badge-info">Categoria</span> Special title treatment</h5>
                <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                <a href="#" class="btn btn-info float-right" data-toggle="tooltip" data-placement="top" title="Ler mais"><i class="fab fa-readme"></i></a>
                <a href="#" class="btn btn-primary float-right" data-toggle="tooltip" data-placement="top" title="Comentar"><i class="fas fa-comments"></i></a>
            </div>
            <div class="card-footer text-muted">
                <span class="float-left">Gabs</span>
                <span class="float-right">@DateTime.Now</span>
            </div>
        </div>
    </div>
    <div class="col-4">
        <div class="card bg-light mb-3 d-md-none d-lg-block d-none d-sm-block d-sm-none d-md-block" style="max-width: 22rem;">
            <div class="card-header text-center"><strong><i class="fas fa-users" style="color:#316B5A;"></i> Usuários mais ativos</strong></div>
            <div class="card-body" id="corpoUsuarios">
                <p class="card-text">
                    <ul class="list-group">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Cras justo odio
                            <span class="badge badge-primary badge-pill" style="background-color: #2E698C">14</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Dapibus ac facilisis in
                            <span class="badge badge-primary badge-pill" style="background-color: #2E698C">2</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Morbi leo risus
                            <span class="badge badge-primary badge-pill" style="background-color: #2E698C">1</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Morbi leo risus
                            <span class="badge badge-primary badge-pill" style="background-color: #2E698C">1</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Morbi leo risus
                            <span class="badge badge-primary badge-pill" style="background-color: #2E698C">1</span>
                        </li>
                    </ul>
                </p>
            </div>
        </div>
        <div id="accordion">
            <div class="card">
                <div class="card-header" id="headingOne">
                    <h5 class="mb-0">
                        <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                            Collapsible Group Item #1
                        </button>
                    </h5>
                </div>

                <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                    <div class="card-body">
                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch.
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header" id="headingTwo">
                    <h5 class="mb-0">
                        <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Collapsible Group Item #2
                        </button>
                    </h5>
                </div>
                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                    <div class="card-body">
                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch.
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header" id="headingThree">
                    <h5 class="mb-0">
                        <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            Collapsible Group Item #3
                        </button>
                    </h5>
                </div>
                <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                    <div class="card-body">
                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch.
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header" id="headingThree">
                    <h5 class="mb-0">
                        <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                            Collapsible Group Item #4
                        </button>
                    </h5>
                </div>
                <div id="collapseFour" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                    <div class="card-body">
                        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-8">
        <nav>
            <ul class="pagination justify-content-center">
                <li class="page-item">
                    <a class="page-link" href="#" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                <li class="page-item"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item">
                    <a class="page-link" href="#" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="modalPost" tabindex="-1" role="dialog" aria-labelledby="modalPostLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="row">
                    <div class="col-7">
                        <input type="text" class="form-control" id="assunto" placeholder="Adicione um título">
                    </div>
                    <div class="col-5">
                        <select class="form-control" id="categoria">
                            <option>Categoria</option>
                            @foreach (var categoria in Model.ToList())
                            {
                                <option>@categoria.Nome</option>
                            }

                        </select>
                    </div>
                </div>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="editor" style="height:250px;">
                    <p>Hello World!</p>
                    <p>Some initial <strong>bold</strong> text</p>
                    <p><br></p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="publicar" class="btn btn-primary">Publicar</button>
            </div>
        </div>
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script>
    $(function () {

        var toolbarOptions = [
            ['bold', 'italic', 'underline', 'strike'],        // toggled buttons
            ['blockquote', 'code-block'],

            [{ 'header': 1 }, { 'header': 2 }],               // custom button values
            [{ 'list': 'ordered' }, { 'list': 'bullet' }],   // superscript/subscript
            [{ 'indent': '-1' }, { 'indent': '+1' }],          // outdent/indent
            [{ 'direction': 'rtl' }],                         // text direction

            [{ 'size': ['small', false, 'large', 'huge'] }],

            [{ 'color': [] }, { 'background': [] }],          // dropdown with defaults from theme
            [{ 'font': [] }],
            [{ 'align': [] }],
            // remove formatting button
        ];

        var quill = new Quill('#editor', {
            modules: {
                toolbar: toolbarOptions
            },
            theme: 'snow'
        });

        $("#publicar").on("click", function () {

            var html = quill.root.innerHTML;
            console.log(html);
            var conteudo = { "conteudo": html };
            $.ajax({
                type: "POST",
                traditional: true,
                url: "@Url.Action("AdicionarPostagem", "Home")",
                data: JSON.stringify(conteudo),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                complete: function (data) {
                     $('#modalPost').modal('toggle');
                }
                });

        });
    });

</script>